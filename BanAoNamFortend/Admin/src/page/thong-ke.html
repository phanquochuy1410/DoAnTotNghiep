<section>
    <div class="container-fluid px-4">
        <div class="card text-center">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link " href="#thong-ke-ban-chay">Thống kê trong ngày</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="#thong-ke-theo-ngay">Thống kê doanh thu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#thong-ke">Thống kê đơn hàng</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#thong-ke-san-pham">Thống kê sản phẩm</a>
                    </li>

                </ul>
            </div>
            <br>
            <br>

            <div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" ng-click="loadThongKe()" class="btn btn-primary">Tất cả</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" ng-click="load7NgayTruoc()" class="btn btn-primary">7 ngày trước</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" ng-click="load1ThangTruoc()" class="btn btn-primary">1 tháng trước</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" ng-click="loadThangNay()" class="btn btn-primary">Tháng này</button>
                </div>
                <div class="btn-group me-2" role="group" aria-label="Second group">
                    <button type="button" ng-click="load1NamTruoc()" class="btn btn-primary">1 năm trước</button>
                </div>
                <a class="btn btn-primary" data-bs-toggle="collapse" href="" role="button" aria-expanded="false"
                    aria-controls="collapseExample" data-bs-target="#collapseExample">
                    Thống kê theo ngày
                </a>

                <a class="btn btn-primary" data-bs-toggle="collapse" href="" role="button" aria-expanded="false"
                    aria-controls="collapseExamples" data-bs-target="#collapseExamples">
                    Thống kê theo khoảng ngày
                </a>
                <br>

                <div class="collapse" id="collapseExample" style="margin-top: 10px;">
                    <div>
                        <b>Ngày : </b> <input type="text" id="dateInput" placeholder="DD-MM-YYYY" ng-change="loadNgay()"
                            ng-model="searchNgay" style="width: 200px;">
                        <button type="button" ng-click="timNgay()" class="btn btn-secondary">Xem</button>
                    </div>
                </div>

                <div class="collapse" id="collapseExamples" style="margin-top: 10px;">
                    <div>
                        <b>Ngày : </b> <input type="text" id="dateInputs" placeholder="DD-MM-YYYY"
                            ng-change="timKhoangNgay()" ng-model="batDau" style="width: 200px;">
                        <b>:</b> <input type="text" id="dateInputss" placeholder="DD-MM-YYYY"
                            ng-change="timKhoangNgay()" ng-model="ketThuc" style="width: 200px;">
                        <button type="button" ng-click="timKhoangNgay()" class="btn btn-secondary">Xem</button>
                    </div>
                </div>
            </div>
            <br>

            <div class="card-group">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Tổng đơn hàng</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{soLuong}}</h1>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Đơn hoàn thành</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{countHT}}</h1>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Đơn chờ xác nhận</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{countXN}}</h1>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Đơn chờ giao</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{countCH}}</h1>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Đơn đang giao</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{countDG}}</h1>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Đơn đã hủy</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{countDH}}</h1>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Đơn đã trả</h5>
                        <p class="card-text">
                        <h1 style="color: red;">{{countDT}}</h1>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <br>

        <div style="float: left;">
            <input class="form-control" ng-model="search" style="width: 200px ; float: left;" type="text"
                placeholder="Tìm kiếm..." ng-change="timKiem()">
            <button class="btn btn-excel btn-sm" ng-click="exportData()" style="margin-left: 10px; height: 45px;"><i
                    class="fas fa-file-excel"></i>Xuất Excel
            </button>
        </div>
        <!-- ng-click="loadThongKe()" -->
        <div style="margin-left: 1000px;">
            <select class="form-select" ng-model="trangThai" ng-change="timKiemTrangThai()"
                aria-label="Default select example" style="width: 200px ; right: auto;">
                <option value="" ng-click="loadThongKe()">Chọn trạng thái</option>
                <option value="1">Hoàn thành</option>
                <option value="0">Chờ xác nhận</option>
                <option value="2">Chờ giao</option>
                <option value="3">Đang giao</option>
                <option value="4">Đã hủy</option>
                <option value="5">Đã trả hàng</option>
            </select>
        </div>

        <br>
        <div class="card mb-4">
            <div class="card-body">
                <table id="hienThi">
                    <thead>
                        <tr>
                            <th>Mã hóa đơn</th>
                            <th>Tên khách hàng</th>
                            <th>Địa chỉ</th>
                            <th>Trạng thái đơn hàng</th>
                            <th>Tổng tiền</th>
                            <th>Hình thức mua</th>
                            <th>Lý do</th>
                            <th>Hình thức thanh toán</th>
                            <th>Ngày tạo</th>
                            <th>Ngày nhận</th>
                        </tr>
                    </thead>

                    <tbody ng-repeat="tk in listHD">
                        <tr>
                            <td>{{tk.maHoaDon}}</td>
                            <td>{{tk.tenKhachHang}}</td>
                            <td>{{tk.diaChi}}</td>
                            <td>{{tk.trangThai == 1 ? "Hoàn thành" : tk.trangThai == 0 ? "Chờ xác nhận"
                                : tk.trangThai == 2 ? "Chờ giao" : tk.trangThai == 3 ? "Đang giao" : tk.trangThai == 5 ?
                                "Đã trả hàng" :"Đã hủy"}}</td>
                            <td>{{tk.tongTien | currency:'':0}}</td>
                            <td>{{tk.tenKhachHang == 'Khách lẻ' ? 'Mua tại quầy':'Mua online'}}</td>
                            <td>{{tk.lyDo == 'undefined' ? ' ' : tk.lyDo}}</td>
                            <td>{{tk.hinhThucThanhToan == 0 ? "Trả sau" : tk.hinhThucThanhToan == 1 ? "Vnpay":"Tại quầy"}}</td>
                            <td>{{tk.ngayTao | date : "dd-MM-yyyy"}}</td>
                            <td>{{tk.ngayNhan | date : "dd-MM-yyyy"}}</td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="exportable" ng-show="false">
            <table class="table table-hover table-bordered" id="sampleTable"
                style="box-sizing: content-box; margin: 0px;">
                <thead style="background-color: #eee;" id="fix">
                    <tr>
                        <th>maHoaDon</th>
                        <th>tenKhachHang</th>
                        <th>diaChi</th>
                        <th>trangThaiDonHang</th>
                        <th>tongTien</th>
                        <th>lyDo</th>
                        <th>hinhThucThanhToan</th>
                        <th>nagyTao</th>
                        <th>ngayNhan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="tk in listHDFull">
                        <td>{{tk.ma}}</td>
                        <td>{{tk.tenNguoiNhan}}</td>
                        <td>{{tk.idKhachHang.idDiaChi.thanhPho}}</td>
                        <td>{{tk.trangThai == 1 ? "Hoàn thành" : tk.trangThai == 0 ? "Chờ xác nhận"
                            : tk.trangThai == 2 ? "Chờ giao" : tk.trangThai == 3 ? "Đang giao" : tk.trangThai == 5 ? "Đã
                            trả hàng" :"Đã hủy"}}</td>
                        <td>{{tk.gia | currency:'':0}}</td>
                        <td>{{tk.lyDo == 'undefined' ? '' : tk.lyDo}}</td>
                        <td>{{tk.hinhThucThanhToan == 0 ? "Trả sau":"Vnpay"}}</td>
                        <td>{{tk.ngayTao | date : "dd-MM-yyyy"}}</td>
                        <td>{{tk.ngayNhan | date : "dd-MM-yyyy"}}</td>
                    </tr>
                </tbody>
            </table>
        </div>


        <div style="text-align: center;">
            <button type="button" class="btn btn-outline-primary" ng-click="prevPage()">
                << </button>
                    <button type=" button" class="btn btn-outline-primary" ng-click="prevPages()"> |< </button>
                            <button type=" button" class="btn btn-outline-primary" ng-click="nextPages()"> >| </button>
                            <button type=" button" class="btn btn-outline-primary" ng-click="nextPage()"> >> </button>
        </div>
    </div>
</section>